"use strict";(self.webpackChunknasheed_library=self.webpackChunknasheed_library||[]).push([[895],{5895:(A,p,a)=>{a.r(p),a.d(p,{TrackListModule:()=>o});var c=a(6895),d=a(8996),u=a(5899),t=a(4650),g=a(8836),h=a(8827),m=a(6017),f=a(7876),v=a(4850),k=a(8711),y=a(1403);function T(n,s){1&n&&t._UZ(0,"app-progress-spinner")}function _(n,s){if(1&n&&t._UZ(0,"audio-player",5),2&n){const e=t.oxw();t.Q6J("audioList",e.tracks)}}const L=function(){return{padding:"1em","padding-bottom":"2em","padding-top":"2em"}};class i{constructor(s,e){this.music_service=s,this.scroll_service=e,this.tracks=[],this.current_tracks_page_number=1,this.last_page_reached=!1,this.loading=!1}ngOnInit(){this.get_tracks(),this.end_of_page_scroll_subscription=this.scroll_service.end_of_scroll$.subscribe(s=>{this.get_tracks()})}get_tracks(){!this.last_page_reached&&!this.loading&&(this.loading=!0,this.music_service.get_tracks(this.current_tracks_page_number).subscribe(s=>{null==s.next&&(this.last_page_reached=!0),this.set_next_page(),this.loading=!1,this.append_fetched_tracks(s.results)}))}append_fetched_tracks(s){this.tracks=this.tracks.concat(s)}set_next_page(){this.current_tracks_page_number++}on_play_track(s){this.audio_player.playTrack(s)}ngOnDestroy(){this.end_of_page_scroll_subscription&&this.end_of_page_scroll_subscription.unsubscribe()}}i.\u0275fac=function(s){return new(s||i)(t.Y36(g.J),t.Y36(h.a))},i.\u0275cmp=t.Xpm({type:i,selectors:[["page-track-list"]],viewQuery:function(s,e){if(1&s&&t.Gf(u.N,5),2&s){let l;t.iGM(l=t.CRH())&&(e.audio_player=l.first)}},decls:9,vars:5,consts:[[3,"ngStyle"],[1,"title"],[3,"tracks","play_track"],[4,"ngIf"],[3,"audioList",4,"ngIf"],[3,"audioList"]],template:function(s,e){1&s&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"h2",1),t._uU(3," All Tracks"),t.qZA(),t._UZ(4,"mat-divider"),t.TgZ(5,"app-track-list",2),t.NdJ("play_track",function(Q){return e.on_play_track(Q)}),t.qZA(),t.YNc(6,T,1,0,"app-progress-spinner",3),t.qZA(),t.YNc(7,_,1,1,"audio-player",4),t._UZ(8,"app-nav")),2&s&&(t.xp6(1),t.Q6J("ngStyle",t.DdM(4,L)),t.xp6(4),t.Q6J("tracks",e.tracks),t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",0!=e.tracks.length))},dependencies:[c.O5,c.PC,m.r,f.G,v.d,k.c,u.N,y.O],styles:[".title[_ngcontent-%COMP%]{font-size:14px;font-weight:400}"]});const C=[{path:"",component:i}];class r{}r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[d.Bz.forChild(C),d.Bz]});var Z=a(2613),x=a(1321),J=a(294),M=a(4805);class o{}o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,J.I,M.x,Z.m,x.O,r]})}}]);